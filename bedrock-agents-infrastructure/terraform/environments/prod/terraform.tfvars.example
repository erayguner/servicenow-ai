# Production Environment Configuration Example
# Copy this file to terraform.tfvars and update with your actual production values
# IMPORTANT: Keep terraform.tfvars in .gitignore - NEVER commit production secrets

# ============================================================================
# AWS REGIONS
# ============================================================================
aws_region       = "us-east-1"
secondary_region = "us-west-2"
dr_region        = "eu-west-1"

# ============================================================================
# OWNERSHIP & CONTACTS
# ============================================================================
owner_email = "prod-ops@example.com"

operational_contacts = {
  primary_oncall   = "primary-oncall@example.com"
  secondary_oncall = "secondary-oncall@example.com"
  escalation_email = "engineering-leads@example.com"
  slack_channel    = "#prod-alerts-servicenow-ai"
}

# ============================================================================
# AGENT CONFIGURATION
# ============================================================================
agent_instruction = <<-EOT
  You are a ServiceNow AI assistant in production environment.
  Provide accurate, reliable, and secure responses for ServiceNow operations.
  Prioritize data integrity, security, and compliance in all interactions.
  Follow enterprise security policies and audit requirements.
  Maintain high availability and performance standards.

  CRITICAL GUIDELINES:
  - Never expose sensitive data or credentials
  - Always validate user permissions before executing actions
  - Log all actions for audit compliance
  - Follow SOX, PCI, and HIPAA requirements
  - Escalate critical issues immediately
EOT

# ============================================================================
# DATA SOURCES
# ============================================================================
data_source_bucket_arn           = "arn:aws:s3:::servicenow-ai-data-prod-primary"
data_source_bucket_arn_secondary = "arn:aws:s3:::servicenow-ai-data-prod-secondary"

# ============================================================================
# LAMBDA CONFIGURATION
# ============================================================================
action_lambda_arn           = "arn:aws:lambda:us-east-1:123456789012:function:servicenow-actions-prod"
action_lambda_arn_secondary = "arn:aws:lambda:us-west-2:123456789012:function:servicenow-actions-prod"

# ============================================================================
# ALERTS & NOTIFICATIONS
# ============================================================================
alert_email         = "prod-critical-alerts@example.com"
alert_sns_topic_arn = "arn:aws:sns:us-east-1:123456789012:servicenow-ai-prod-alerts"

# PagerDuty Integration
enable_pagerduty          = true
pagerduty_integration_key = "YOUR_PAGERDUTY_INTEGRATION_KEY"  # Store in AWS Secrets Manager

# ============================================================================
# TERRAFORM STATE BACKEND
# ============================================================================
state_bucket_name     = "servicenow-ai-terraform-state-prod"
state_lock_table_name = "servicenow-ai-terraform-locks-prod"

# ============================================================================
# SECURITY & ENCRYPTION
# ============================================================================
kms_key_id = "arn:aws:kms:us-east-1:123456789012:key/12345678-1234-1234-1234-123456789012"

security_config = {
  enable_waf              = true
  enable_shield_advanced  = true
  enable_secrets_rotation = true
  mfa_required            = true
  ip_whitelist            = [
    # Add your corporate IP ranges
    # "203.0.113.0/24",
    # "198.51.100.0/24"
  ]
}

# WAF Rules
waf_rules = [
  {
    name     = "rate-limit-api"
    priority = 1
    action   = "block"
  },
  {
    name     = "geo-blocking-high-risk"
    priority = 2
    action   = "block"
  },
  {
    name     = "sql-injection-protection"
    priority = 3
    action   = "block"
  },
  {
    name     = "xss-protection"
    priority = 4
    action   = "block"
  },
  {
    name     = "known-bad-inputs"
    priority = 5
    action   = "block"
  }
]

enable_shield_advanced = true

# ============================================================================
# AUTO-SCALING CONFIGURATION
# ============================================================================
auto_scaling_config = {
  min_instances        = 5
  max_instances        = 20
  desired_instances    = 8
  scale_up_threshold   = 70
  scale_down_threshold = 30
}

# ============================================================================
# PERFORMANCE CONFIGURATION
# ============================================================================
performance_config = {
  provisioned_units           = 100
  cache_ttl_seconds           = 3600
  max_concurrent_requests     = 100
  lambda_provisioned_capacity = 10
}

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================
backup_config = {
  retention_days                = 30
  schedule                      = "cron(0 2 * * ? *)"  # Daily at 2 AM UTC
  enable_point_in_time_recovery = true
}

# ============================================================================
# MONITORING THRESHOLDS
# ============================================================================
monitoring_thresholds = {
  error_rate_percent   = 0.05  # 5% error rate triggers alert
  latency_ms           = 2000  # 2 seconds P99 latency
  availability_percent = 99.9  # 99.9% uptime SLA
  throttle_count       = 1000  # Throttle alert threshold
}

# ============================================================================
# COMPLIANCE CONFIGURATION
# ============================================================================
compliance_config = {
  frameworks           = ["sox", "pci", "hipaa"]
  enable_audit_logging = true
  log_retention_days   = 90
  enable_encryption    = true
}

# ============================================================================
# BUSINESS CONTINUITY
# ============================================================================
business_continuity_config = {
  enable_multi_region       = true
  enable_automatic_failover = true
  rpo_minutes               = 15  # Recovery Point Objective
  rto_minutes               = 30  # Recovery Time Objective
}

# ============================================================================
# SYNTHETIC MONITORING
# ============================================================================
synthetic_test_scenarios = [
  {
    name        = "agent-health-check"
    description = "Basic agent health and availability check"
    frequency   = "5min"
  },
  {
    name        = "knowledge-base-query-test"
    description = "Knowledge base retrieval functionality"
    frequency   = "10min"
  },
  {
    name        = "action-group-execution-test"
    description = "Action group functionality validation"
    frequency   = "15min"
  },
  {
    name        = "end-to-end-workflow-test"
    description = "Complete workflow from query to response"
    frequency   = "30min"
  }
]

# ============================================================================
# COST ALLOCATION TAGS
# ============================================================================
cost_allocation_tags = {
  Department   = "Engineering"
  Application  = "ServiceNow-AI"
  CostCenter   = "PROD-OPS-001"
  BusinessUnit = "IT-Operations"
  Service      = "AI-Agent-Platform"
  Billing      = "production"
}

# ============================================================================
# CHANGE MANAGEMENT
# ============================================================================
change_window = {
  day_of_week    = "Sunday"
  start_hour     = 2  # 2 AM UTC
  duration_hours = 4
}

# ============================================================================
# RESOURCE ESTIMATES
# ============================================================================

# Expected Monthly Costs:
# -------------------------
# Bedrock Agents (Primary):        $800-1200/month (8 instances, provisioned)
# Bedrock Agents (Secondary):      $800-1200/month (8 instances, provisioned)
# OpenSearch Provisioned:          $400-600/month (HA cluster)
# Lambda Provisioned:              $100-150/month (provisioned concurrency)
# CloudWatch Logs & Metrics:       $80-120/month (90-day retention)
# X-Ray Tracing:                   $40-60/month
# S3 Storage & Replication:        $50-80/month
# Data Transfer (Multi-region):    $100-200/month
# WAF & Shield Advanced:           $200-300/month
# Synthetics Monitoring:           $30-50/month
# Backup Storage:                  $50-100/month
# -------------------------
# TOTAL ESTIMATED:                 $2,500-4,000/month

# ============================================================================
# DEPLOYMENT INSTRUCTIONS
# ============================================================================

# 1. Initialize Terraform:
#    terraform init \
#      -backend-config="bucket=servicenow-ai-terraform-state-prod" \
#      -backend-config="key=bedrock-agents/prod/terraform.tfstate" \
#      -backend-config="dynamodb_table=servicenow-ai-terraform-locks-prod"

# 2. Create workspace (if using workspaces):
#    terraform workspace new prod

# 3. Plan changes:
#    terraform plan -var-file="terraform.tfvars" -out=prod.plan

# 4. Apply changes (requires approval):
#    terraform apply prod.plan

# 5. Verify deployment:
#    terraform output

# ============================================================================
# SECURITY REMINDERS
# ============================================================================

# - Store this file as terraform.tfvars (gitignored)
# - Use AWS Secrets Manager for sensitive values
# - Rotate credentials every 90 days
# - Enable MFA for all production access
# - Review IAM permissions quarterly
# - Monitor CloudTrail for suspicious activity
# - Keep Terraform and providers updated
# - Use separate AWS accounts for environments
# - Enable GuardDuty and Security Hub
# - Implement least privilege access

# ============================================================================
# RUNBOOK LINKS
# ============================================================================

# - Incident Response: https://wiki.example.com/incident-response
# - Disaster Recovery: https://wiki.example.com/dr-runbook
# - Deployment Guide: https://wiki.example.com/deployment-guide
# - Monitoring Guide: https://wiki.example.com/monitoring-guide
# - Security Policies: https://wiki.example.com/security-policies
