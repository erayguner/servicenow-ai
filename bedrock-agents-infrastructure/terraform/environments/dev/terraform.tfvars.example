# Development Environment Configuration Example
# Copy this file to terraform.tfvars and update with your values

# AWS Configuration
aws_region = "us-east-1"

# Owner Information
owner_email = "dev-team@example.com"

# Agent Configuration
agent_instruction = <<-EOT
  You are a ServiceNow AI assistant in development mode.
  Help developers test and debug ServiceNow integrations.
  Provide detailed responses for troubleshooting.
  This is a development environment - be verbose and educational.
EOT

# Data Sources
data_source_bucket_arn = "arn:aws:s3:::servicenow-ai-data-dev"

# Lambda Configuration
action_lambda_arn = "arn:aws:lambda:us-east-1:123456789012:function:servicenow-actions-dev"

# Alerts (optional in dev)
alert_email = "dev-alerts@example.com"

# Backend Configuration
state_bucket_name     = "servicenow-ai-terraform-state-dev"
state_lock_table_name = "servicenow-ai-terraform-locks-dev"

# Cost Optimization
enable_cost_optimization = true
auto_shutdown_enabled    = true

# Development Team
dev_team_members = [
  "developer1@example.com",
  "developer2@example.com",
  "developer3@example.com"
]

# Debug Settings
enable_debug_mode  = true
test_data_enabled  = true

# Example resource naming:
# - Agent: servicenow-ai-agent-dev
# - Knowledge Base: servicenow-ai-kb-dev
# - Log Group: /aws/bedrock/agent/servicenow-ai-dev

# Cost Estimate:
# - Bedrock Agent (on-demand): ~$20-40/month
# - OpenSearch Serverless: ~$20-30/month
# - Lambda executions: ~$5-10/month
# - CloudWatch logs: ~$5-10/month
# - S3 storage: ~$5/month
# Total: ~$50-100/month (with auto-shutdown)

# ==============================================================================
# Security Module Configuration
# ==============================================================================

# KMS Key Administrators (optional - use AWS account root if not specified)
kms_key_admin_arns = [
  # "arn:aws:iam::123456789012:role/SecurityAdmin",
  # "arn:aws:iam::123456789012:user/security-team"
]

# Lambda Functions to Monitor (optional)
lambda_function_names = [
  # "servicenow-actions-dev",
  # "servicenow-processor-dev"
]

# ==============================================================================
# Monitoring Module Configuration
# ==============================================================================

# Bedrock Agent Endpoints for Synthetic Monitoring (optional)
bedrock_agent_endpoints = [
  # "https://bedrock-agent.us-east-1.amazonaws.com/alias/XXXXX"
]

# ==============================================================================
# Cost Estimate with Security & Monitoring
# ==============================================================================
# - Bedrock Agent (on-demand): ~$20-40/month
# - OpenSearch Serverless: ~$20-30/month
# - Lambda executions: ~$5-10/month
# - CloudWatch logs & dashboards: ~$10-15/month
# - CloudTrail: ~$5/month
# - EventBridge: ~$2/month
# - S3 storage: ~$10/month
# - KMS (pay per use): ~$1-3/month
# Total: ~$75-120/month (with auto-shutdown)
#
# NOTE: GuardDuty, Security Hub, WAF, and X-Ray are disabled in dev to save costs
# Uncomment the modules in main.tf if needed for security testing

# ==============================================================================
# ServiceNow Module Configuration
# ==============================================================================

# ServiceNow Instance Configuration (Optional for dev - set to "" to disable)
servicenow_instance_url = ""  # "https://dev12345.service-now.com"

# Authentication Type (oauth recommended for production)
servicenow_auth_type = "oauth"

# ServiceNow Credentials Secret (create in AWS Secrets Manager first)
# Secret should contain: {"username": "...", "password": "...", "client_id": "...", "client_secret": "..."}
servicenow_credentials_secret_arn = null  # "arn:aws:secretsmanager:us-east-1:123456789012:secret:servicenow-dev-credentials-xxxxx"

# Cost Estimate with ServiceNow Module:
# - API Gateway: ~$3-5/month (minimal traffic)
# - Lambda executions: ~$10-15/month
# - DynamoDB (PAY_PER_REQUEST): ~$5-10/month
# - Step Functions: ~$2-5/month
# Total Additional: ~$20-35/month
#
# NOTE: Most ServiceNow features are disabled in dev to save costs
# Only incident automation and ticket triage are enabled for basic testing

# ==============================================================================
# Testing Commands
# ==============================================================================
# terraform init -backend-config="bucket=servicenow-ai-terraform-state-dev"
# terraform plan -var-file="terraform.tfvars"
# terraform apply -var-file="terraform.tfvars"

# ==============================================================================
# ServiceNow Integration Setup Steps
# ==============================================================================
# 1. Create ServiceNow developer instance at https://developer.servicenow.com/
# 2. Create OAuth application in ServiceNow:
#    - Navigate to System OAuth > Application Registry
#    - Create new OAuth API endpoint for external clients
#    - Note the Client ID and Client Secret
# 3. Store credentials in AWS Secrets Manager:
#    aws secretsmanager create-secret \
#      --name servicenow-dev-credentials \
#      --description "ServiceNow dev instance credentials" \
#      --secret-string '{"username":"admin","password":"YOUR_PASSWORD","client_id":"YOUR_CLIENT_ID","client_secret":"YOUR_CLIENT_SECRET"}'
# 4. Update servicenow_instance_url and servicenow_credentials_secret_arn above
# 5. Deploy infrastructure: terraform apply
# 6. Configure ServiceNow webhook to point to API Gateway endpoint (see outputs)
